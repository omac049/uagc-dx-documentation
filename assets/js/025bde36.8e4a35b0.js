"use strict";(self.webpackChunkuagc_dx_documentation=self.webpackChunkuagc_dx_documentation||[]).push([[7354],{1486:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"guides/drupal-standards","title":"Drupal Coding Standards & Snippet Library","description":"This guide provides coding standards, best practices, and reusable code snippets for Drupal development at UAGC.","source":"@site/new-docs/guides/drupal-standards.md","sourceDirName":"guides","slug":"/guides/drupal-standards","permalink":"/uagc-dx-documentation/guides/drupal-standards","draft":false,"unlisted":false,"editUrl":"https://github.com/omac049/uagc-dx-documentation/edit/main/new-docs/new-docs/guides/drupal-standards.md","tags":[],"version":"current","lastUpdatedBy":"Your Name","lastUpdatedAt":1756833570000,"frontMatter":{},"sidebar":"qaDevSidebar","next":{"title":"Development Workflows","permalink":"/uagc-dx-documentation/development-workflows"}}');var t=i(4848),a=i(8453);const l={},r="Drupal Coding Standards & Snippet Library",d={},o=[{value:"Coding Standards",id:"coding-standards",level:2},{value:"PHP Standards",id:"php-standards",level:3},{value:"JavaScript Standards",id:"javascript-standards",level:3},{value:"CSS/SCSS Standards",id:"cssscss-standards",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Snippet Library",id:"snippet-library",level:2},{value:"Entity Loading",id:"entity-loading",level:3},{value:"Custom Block Creation",id:"custom-block-creation",level:3},{value:"Form API Example",id:"form-api-example",level:3},{value:"Custom AJAX Callback",id:"custom-ajax-callback",level:3},{value:"Module Structure",id:"module-structure",level:2},{value:"Code Review Checklist",id:"code-review-checklist",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"drupal-coding-standards--snippet-library",children:"Drupal Coding Standards & Snippet Library"})}),"\n",(0,t.jsx)(n.p,{children:"This guide provides coding standards, best practices, and reusable code snippets for Drupal development at UAGC."}),"\n",(0,t.jsx)(n.p,{children:'!!! warning "Important"\nFollowing these standards is mandatory for all Drupal development to ensure code quality, maintainability, and security.'}),"\n",(0,t.jsx)(n.h2,{id:"coding-standards",children:"Coding Standards"}),"\n",(0,t.jsxs)(n.p,{children:["Our Drupal development follows the official ",(0,t.jsx)(n.a,{href:"https://www.drupal.org/docs/develop/standards",children:"Drupal Coding Standards"})," with some additional team-specific guidelines."]}),"\n",(0,t.jsx)(n.h3,{id:"php-standards",children:"PHP Standards"}),"\n",(0,t.jsx)(n.p,{children:'=== "Formatting"'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use 2 spaces for indentation (not tabs)"}),"\n",(0,t.jsx)(n.li,{children:"Line length should not exceed 80 characters"}),"\n",(0,t.jsx)(n.li,{children:"Opening braces for classes and functions on the same line"}),"\n",(0,t.jsx)(n.li,{children:"Use meaningful variable and function names"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"function example_module_get_content($node_id, $options = []) {\n  $result = [];\n  // Implementation here\n  return $result;\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:'=== "Documentation"'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All functions require docblock comments"}),"\n",(0,t.jsx)(n.li,{children:'Comments should explain "why", not "what"'}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"@param"}),", ",(0,t.jsx)(n.code,{children:"@return"}),", ",(0,t.jsx)(n.code,{children:"@throws"})," tags properly"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"/**\n * Retrieves formatted content for a specific node.\n *\n * @param int $node_id\n *   The node ID to fetch content for.\n * @param array $options\n *   (optional) Additional options for content retrieval.\n *\n * @return array\n *   Structured array of node content.\n *\n * @throws \\Drupal\\Core\\Entity\\EntityMalformedException\n *   When the node cannot be loaded or is invalid.\n */\nfunction example_module_get_content($node_id, $options = []) {\n  // Implementation here\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:'=== "Naming Conventions"'}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Module names: lowercase, underscores for spaces"}),"\n",(0,t.jsx)(n.li,{children:"Function names: [module_name]_[description]"}),"\n",(0,t.jsx)(n.li,{children:"Classes: CamelCase"}),"\n",(0,t.jsx)(n.li,{children:"Variables: snake_case"}),"\n",(0,t.jsx)(n.li,{children:"Constants: ALL_CAPS_WITH_UNDERSCORES"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"javascript-standards",children:"JavaScript Standards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Follow Drupal JavaScript coding standards"}),"\n",(0,t.jsx)(n.li,{children:"Use ES6 features with Babel transpilation"}),"\n",(0,t.jsx)(n.li,{children:"Document with JSDoc comments"}),"\n",(0,t.jsx)(n.li,{children:"Maintain proper namespacing for behaviors"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cssscss-standards",children:"CSS/SCSS Standards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use BEM (Block Element Modifier) methodology"}),"\n",(0,t.jsx)(n.li,{children:"Maintain proper component namespacing"}),"\n",(0,t.jsx)(n.li,{children:"Structure SCSS files by component"}),"\n",(0,t.jsx)(n.li,{children:"Use variables for colors, fonts, and spacing"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Input Validation & Sanitization"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always validate and sanitize user input"}),"\n",(0,t.jsx)(n.li,{children:"Use Drupal's sanitization functions"}),"\n",(0,t.jsx)(n.li,{children:"Implement proper access checks"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Database Queries"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use parameterized queries with ",(0,t.jsx)(n.code,{children:"db_query()"})]}),"\n",(0,t.jsx)(n.li,{children:"Implement entity queries instead of raw SQL when possible"}),"\n",(0,t.jsx)(n.li,{children:"Never use user input directly in queries"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Form API Usage"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implement proper form validation"}),"\n",(0,t.jsxs)(n.li,{children:["Use CSRF tokens with ",(0,t.jsx)(n.code,{children:"#token"})]}),"\n",(0,t.jsx)(n.li,{children:"Check user permissions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implement appropriate caching strategies"}),"\n",(0,t.jsx)(n.li,{children:"Use lazy loading where appropriate"}),"\n",(0,t.jsx)(n.li,{children:"Optimize database queries"}),"\n",(0,t.jsx)(n.li,{children:"Implement efficient render arrays"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"snippet-library",children:"Snippet Library"}),"\n",(0,t.jsx)(n.h3,{id:"entity-loading",children:"Entity Loading"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"// Load a node by ID\n$node = \\Drupal\\node\\Entity\\Node::load($node_id);\n\n// Load multiple nodes\n$nodes = \\Drupal\\node\\Entity\\Node::loadMultiple($node_ids);\n\n// Load by properties\n$query = \\Drupal::entityQuery('node')\n  ->condition('type', 'article')\n  ->condition('status', 1)\n  ->range(0, 10);\n$nids = $query->execute();\n$nodes = \\Drupal\\node\\Entity\\Node::loadMultiple($nids);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-block-creation",children:"Custom Block Creation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"use Drupal\\block_content\\Entity\\BlockContent;\n\n// Create a custom block\n$block = BlockContent::create([\n  'type' => 'basic',\n  'info' => 'Block title',\n  'body' => [\n    'value' => 'Block content here',\n    'format' => 'full_html',\n  ],\n]);\n$block->save();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"form-api-example",children:"Form API Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"/**\n * Implements hook_form().\n */\nfunction example_module_form($form, &$form_state) {\n  $form['name'] = [\n    '#type' => 'textfield',\n    '#title' => t('Name'),\n    '#required' => TRUE,\n    '#maxlength' => 64,\n  ];\n  \n  $form['email'] = [\n    '#type' => 'email',\n    '#title' => t('Email'),\n    '#required' => TRUE,\n  ];\n  \n  $form['submit'] = [\n    '#type' => 'submit',\n    '#value' => t('Submit'),\n  ];\n  \n  return $form;\n}\n\n/**\n * Form validation handler.\n */\nfunction example_module_form_validate($form, &$form_state) {\n  // Validation logic here\n}\n\n/**\n * Form submission handler.\n */\nfunction example_module_form_submit($form, &$form_state) {\n  // Submission handling here\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-ajax-callback",children:"Custom AJAX Callback"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"/**\n * Implements form with AJAX callback.\n */\nfunction example_module_ajax_form($form, &$form_state) {\n  $form['selection'] = [\n    '#type' => 'select',\n    '#title' => t('Choose an option'),\n    '#options' => [\n      '1' => t('Option 1'),\n      '2' => t('Option 2'),\n    ],\n    '#ajax' => [\n      'callback' => 'example_module_ajax_callback',\n      'wrapper' => 'ajax-container',\n      'method' => 'replace',\n      'effect' => 'fade',\n    ],\n  ];\n  \n  $form['container'] = [\n    '#type' => 'container',\n    '#attributes' => ['id' => 'ajax-container'],\n  ];\n  \n  return $form;\n}\n\n/**\n * AJAX callback function.\n */\nfunction example_module_ajax_callback($form, &$form_state) {\n  // Process and return the container element\n  return $form['container'];\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"module-structure",children:"Module Structure"}),"\n",(0,t.jsx)(n.p,{children:"Follow this structure for custom modules:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"example_module/\n\u251c\u2500\u2500 example_module.info.yml\n\u251c\u2500\u2500 example_module.module\n\u251c\u2500\u2500 example_module.install\n\u251c\u2500\u2500 example_module.libraries.yml\n\u251c\u2500\u2500 example_module.routing.yml\n\u251c\u2500\u2500 example_module.services.yml\n\u251c\u2500\u2500 example_module.permissions.yml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 Controller/\n\u2502   \u251c\u2500\u2500 Form/\n\u2502   \u251c\u2500\u2500 Plugin/\n\u2502   \u2514\u2500\u2500 Service/\n\u251c\u2500\u2500 templates/\n\u251c\u2500\u2500 css/\n\u251c\u2500\u2500 js/\n\u2514\u2500\u2500 tests/\n"})}),"\n",(0,t.jsx)(n.h2,{id:"code-review-checklist",children:"Code Review Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before submitting code for review:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Code follows Drupal coding standards"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All functions have proper documentation"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Security best practices are followed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Performance considerations addressed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tests have been written and pass"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No PHP errors or warnings"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Module dependencies properly defined"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No hardcoded values that should be configurable"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key Contact:"})," Jason (Senior Backend Drupal Engineer)"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var s=i(6540);const t={},a=s.createContext(t);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);