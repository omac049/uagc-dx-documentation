"use strict";(self.webpackChunkuagc_dx_documentation=self.webpackChunkuagc_dx_documentation||[]).push([[2047],{324:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"guides/bigquery","title":"BigQuery Pipelines","description":"This guide covers the configuration and use of BigQuery for analytics data pipelines at UAGC.","source":"@site/new-docs/guides/bigquery.md","sourceDirName":"guides","slug":"/guides/bigquery","permalink":"/uagc-dx-documentation/guides/bigquery","draft":false,"unlisted":false,"editUrl":"https://github.com/omac049/uagc-dx-documentation/edit/main/new-docs/new-docs/guides/bigquery.md","tags":[],"version":"current","lastUpdatedBy":"Your Name","lastUpdatedAt":1756833570000,"frontMatter":{"comments":true},"sidebar":"analyticsSidebar","previous":{"title":"gtm-configuration-datalayer","permalink":"/uagc-dx-documentation/gtm-configuration-datalayer"},"next":{"title":"lead-api-salesforce-integration","permalink":"/uagc-dx-documentation/lead-api-salesforce-integration"}}');var r=i(4848),t=i(8453);const a={comments:!0},l="BigQuery Pipelines",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Data Sources",id:"data-sources",level:2},{value:"Standard Pipeline Setup",id:"standard-pipeline-setup",level:2},{value:"GA4 to BigQuery Connection",id:"ga4-to-bigquery-connection",level:3},{value:"Access and Permissions",id:"access-and-permissions",level:3},{value:"Common Queries",id:"common-queries",level:2},{value:"Basic User Path Analysis",id:"basic-user-path-analysis",level:3},{value:"Conversion Path Analysis",id:"conversion-path-analysis",level:3},{value:"Dashboard Connections",id:"dashboard-connections",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:3},{value:"Query Optimization Tips",id:"query-optimization-tips",level:3},{value:"Support and Resources",id:"support-and-resources",level:2},{value:"Request New Analysis",id:"request-new-analysis",level:2},{value:"Maintenance Schedule",id:"maintenance-schedule",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bigquery-pipelines",children:"BigQuery Pipelines"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers the configuration and use of BigQuery for analytics data pipelines at UAGC."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"BigQuery is our data warehouse solution that stores and processes analytics data from GA4 and other sources. We use it to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create custom reports beyond what GA4 interface provides"}),"\n",(0,r.jsx)(n.li,{children:"Build data pipelines for dashboards and BI tools"}),"\n",(0,r.jsx)(n.li,{children:"Perform complex analysis on user behavior and marketing performance"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"data-sources",children:"Data Sources"}),"\n",(0,r.jsx)(n.p,{children:"Our BigQuery pipelines pull data from several sources:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GA4 export (primary web analytics data)"}),"\n",(0,r.jsx)(n.li,{children:"CRM data exports (enrollment and student data)"}),"\n",(0,r.jsx)(n.li,{children:"Marketing campaign data"}),"\n",(0,r.jsx)(n.li,{children:"Ad platform data"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"standard-pipeline-setup",children:"Standard Pipeline Setup"}),"\n",(0,r.jsx)(n.h3,{id:"ga4-to-bigquery-connection",children:"GA4 to BigQuery Connection"}),"\n",(0,r.jsx)(n.p,{children:"The GA4 data is automatically exported to BigQuery through the following setup:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"GA4 property linked to BigQuery project"}),"\n",(0,r.jsx)(n.li,{children:"Data streams configured for daily export"}),"\n",(0,r.jsx)(n.li,{children:"Schema maintained by Google with automated updates"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"access-and-permissions",children:"Access and Permissions"}),"\n",(0,r.jsx)(n.p,{children:"Access to BigQuery is managed through:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyst Role"}),": Read-only access to all datasets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Engineer Role"}),": Read and transform capabilities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Admin Role"}),": Full configuration access"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Contact Omar to request appropriate access levels."}),"\n",(0,r.jsx)(n.h2,{id:"common-queries",children:"Common Queries"}),"\n",(0,r.jsx)(n.h3,{id:"basic-user-path-analysis",children:"Basic User Path Analysis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  event_date,\n  user_pseudo_id,\n  event_name,\n  page_location,\n  page_title\nFROM\n  `uagc-analytics.analytics_XXXXXX.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250501' AND '20250531'\n  AND event_name IN ('page_view', 'form_start', 'form_submit')\nORDER BY\n  user_pseudo_id,\n  event_timestamp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"conversion-path-analysis",children:"Conversion Path Analysis"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"SELECT\n  user_pseudo_id,\n  ARRAY_AGG(\n    STRUCT(\n      event_timestamp,\n      event_name,\n      page_location,\n      traffic_source.source AS traffic_source\n    )\n    ORDER BY event_timestamp ASC\n  ) AS user_journey\nFROM\n  `uagc-analytics.analytics_XXXXXX.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250501' AND '20250531'\n  AND user_pseudo_id IN (\n    SELECT DISTINCT user_pseudo_id\n    FROM `uagc-analytics.analytics_XXXXXX.events_*`\n    WHERE \n      _TABLE_SUFFIX BETWEEN '20250501' AND '20250531'\n      AND event_name = 'generate_lead'\n  )\nGROUP BY\n  user_pseudo_id\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dashboard-connections",children:"Dashboard Connections"}),"\n",(0,r.jsx)(n.p,{children:"We connect BigQuery to several visualization platforms:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Google Data Studio/Looker Studio"}),": Primary dashboarding tool"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tableau"}),": For advanced visualizations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom internal dashboards"}),": Built on our intranet"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Issue"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Missing data"}),(0,r.jsx)(n.td,{children:"Check export settings in GA4 admin"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Query timeout"}),(0,r.jsx)(n.td,{children:"Optimize query or use scheduled queries"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Permission denied"}),(0,r.jsx)(n.td,{children:"Contact Omar to verify access roles"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cost concerns"}),(0,r.jsx)(n.td,{children:"Use query optimization and partitioning"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"query-optimization-tips",children:"Query Optimization Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Always filter by date using _TABLE_SUFFIX"}),"\n",(0,r.jsx)(n.li,{children:"Include LIMIT when developing new queries"}),"\n",(0,r.jsx)(n.li,{children:"Use partitioned and clustered tables when possible"}),"\n",(0,r.jsx)(n.li,{children:"Avoid SELECT * in production queries"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"support-and-resources",children:"Support and Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Internal Contact"}),": Omar (SEO & Tracking Manager)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation"}),": ",(0,r.jsx)(n.a,{href:"https://cloud.google.com/bigquery/docs",children:"Google BigQuery Documentation"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"GA4 Schema Reference"}),": ",(0,r.jsx)(n.a,{href:"https://support.google.com/analytics/answer/7029846",children:"GA4 BigQuery Export schema"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"request-new-analysis",children:"Request New Analysis"}),"\n",(0,r.jsx)(n.p,{children:"To request a new analysis or dashboard:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create an Asana task using the ",(0,r.jsx)(n.strong,{children:"Analytics Request"})," template"]}),"\n",(0,r.jsx)(n.li,{children:"Include specific KPIs and metrics needed"}),"\n",(0,r.jsx)(n.li,{children:"Note the time range for analysis"}),"\n",(0,r.jsx)(n.li,{children:"Specify visualization preferences"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"maintenance-schedule",children:"Maintenance Schedule"}),"\n",(0,r.jsx)(n.p,{children:"The BigQuery export pipeline is maintained according to this schedule:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Daily"}),": Automated monitoring for failed exports"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Weekly"}),": Performance optimization review"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monthly"}),": Cost optimization review"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quarterly"}),": Schema and pipeline architecture review"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:'!!! note "Training Available"\nContact Omar to schedule a training session for accessing and querying BigQuery data.'})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);